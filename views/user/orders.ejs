<%- include("../../views/partials/user/header") %>
<style>
  body {
    background-color: #ffffff;
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
  }

  .orders-container {
    width: 100%;
    margin: 50px auto;
    padding: 0 20px;
  }

  .orders-header {
    text-align: center;
    padding: 20px 0px;
    font-size: 28px;
    font-weight: bold;
    color: #000;
  }

  .orders-table {
    width: 100%;
    border-collapse: collapse;
  }

  .table-header {
    background-color: #e2d9b2;
    padding: 15px;
    color: #333;
    font-weight: normal;
    text-align: left;
  }

  .orderid-column {
    width: 15%;
  }

  .date-column {
    width: 15%;
  }

  .status-column {
    width: 12%;
  }

  .products-column {
    width: 35%;
  }

  .amount-column {
    width: 13%;
  }

  .action-column {
    width: 10%;
  }

  .order-item {
    border-bottom: 1px solid #eee;
  }

  .order-info {
    padding: 20px 15px;
  }

  .order-id {
    font-weight: bold;
    color: #333;
    font-size: 14px;
  }

  .order-date {
    color: #666;
    font-size: 14px;
  }

  .status-badge {
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: bold;
    text-transform: uppercase;
  }

  .status-delivered {
    background-color: #d4edda;
    color: #155724;
  }

  .status-shipped {
    background-color: #cce7ff;
    color: #004085;
  }

  .status-processing {
    background-color: #fff3cd;
    color: #856404;
  }

  .status-cancelled {
    background-color: #f8d7da;
    color: #721c24;
  }
  .status-return {
    background-color: #f8d7da;
    color: #6fa70e;
    border: 1px solid #f5c6cb;
  }

  .products-container {
    display: flex;
    flex-direction: column;
    gap: 15px;
    padding: 15px;
  }

  .product-item {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .product-image {
    width: 60px;
    height: 70px;
    object-fit: contain;
    border: 1px solid #eee;
    border-radius: 4px;
  }

  .product-details {
    flex: 1;
  }

  .product-name {
    font-weight: bold;
    font-size: 14px;
    margin-bottom: 4px;
    color: #333;
  }

  .product-specs {
    color: #666;
    font-size: 12px;
    line-height: 1.3;
  }

  .product-quantity {
    color: #888;
    font-size: 12px;
    margin-top: 2px;
  }

  .total-amount {
    font-size: 18px;
    font-weight: bold;
    color: #000;
    text-align: center;
    padding: 20px 15px;
  }

  .action-buttons {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 15px;
    align-items: center;
  }

  .view-button {
    background-color: #22a858;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    font-weight: normal;
    transition: background-color 0.2s;
    width: 80px;
  }

  .view-button:hover {
    background-color: #1c9149;
  }

  .track-button {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    font-weight: normal;
    transition: background-color 0.2s;
    width: 80px;
  }

  .track-button:hover {
    background-color: #0056b3;
  }

  .cancel-button {
    background-color: #dc3545;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    font-weight: normal;
    transition: background-color 0.2s;
    width: 80px;
  }

  .cancel-button:hover {
    background-color: #c82333;
  }

  .center {
    text-align: center;
  }

  .no-orders {
    padding: 40px;
    text-align: center;
    color: #666;
    font-size: 16px;
  }

  @media screen and (max-width: 768px) {
    .orders-header {
      font-size: 24px;
      padding: 15px 0;
    }

    .table-header {
      padding: 10px;
      font-size: 14px;
    }

    .product-name {
      font-size: 13px;
    }

    .product-specs {
      font-size: 11px;
    }

    .total-amount {
      font-size: 16px;
    }

    .view-button,
    .track-button,
    .cancel-button {
      padding: 6px 12px;
      font-size: 11px;
      width: 70px;
    }
  }

  @media screen and (max-width: 600px) {
    .orders-table thead {
      display: none;
    }

    .orders-table,
    .orders-table tbody,
    .orders-table tr,
    .orders-table td {
      display: block;
      width: 100%;
    }

    .order-item {
      padding: 15px 0;
      border: 1px solid #eee;
      margin-bottom: 15px;
      border-radius: 8px;
    }

    .order-info {
      border-bottom: 1px solid #eee;
      margin-bottom: 10px;
    }

    .order-info::before {
      content: "Order ID: ";
      font-weight: bold;
      color: #666;
    }

    .order-date::before {
      content: "Date: ";
      font-weight: bold;
      color: #666;
    }

    .products-container {
      border-bottom: 1px solid #eee;
      margin-bottom: 10px;
    }

    .total-amount::before {
      content: "Total: ";
      font-weight: normal;
      color: #666;
    }

    .action-buttons {
      flex-direction: row;
      justify-content: center;
      gap: 10px;
    }

    .view-button,
    .track-button,
    .cancel-button {
      width: auto;
      padding: 8px 12px;
    }
  }

  @media screen and (max-width: 480px) {
    .orders-container {
      padding: 0 10px;
    }

    .orders-header {
      font-size: 20px;
    }

    .product-specs {
      font-size: 10px;
    }
  }
</style>

<body>
  <div class="container orders-container">
    <h2 class="orders-header">MY ORDERS</h2>

    <table class="orders-table">
      <thead>
        <tr>
          <th class="table-header orderid-column">Order ID</th>
          <th class="table-header date-column">Order Date</th>
          <th class="table-header status-column">Status</th>
          <th class="table-header products-column">Products</th>
          <th class="table-header amount-column">Total Amount</th>
          <th class="table-header action-column center">Action</th>
        </tr>
      </thead>
      <tbody id="orders-tbody">
        <!-- Sample Orders - Replace with your server-side rendering -->
        <% orders.forEach(order => { %>
        <tr class="order-item">
          <td class="orderid-column">
            <div class="order-info">
              <div class="order-id"><%= order.orderId %></div>
            </div>
          </td>
          <td class="date-column">
            <div class="order-info">
              <div class="order-date">
                <%= order.createOn.toLocaleDateString() %>
              </div>
            </div>
          </td>
          <td class="status-column">
            <div class="order-info">
              <span
                class="status-badge status-<%= order.status.toLowerCase() %>"
              >
                <%= order.status %>
              </span>
            </div>
          </td>
          <td class="products-column">
            <div class="products-container">
              <% order.orderedItem.forEach(item => { %>
              <div class="product-item">
                <img
                  src="<%= item.Product?.productImage?.[0] || '/images/placeholder.jpg' %>"
                  class="product-image"
                  alt="<%= item.Product?.name || 'Product' %>"
                />
                <div class="product-details">
                  <div class="product-name">
                    <%= item.Product?.productName || 'Unknown Product' %>
                  </div>
                  <div class="product-specs">
                    <%= item.Product?.category?.name || 'N/A' %><br />
                    <%= item.Product?.brand?.name || 'N/A' %>
                  </div>
                  <div class="product-quantity">Qty: <%= item.quantity %></div>
                </div>
              </div>
              <% }) %>
            </div>
          </td>
          <td class="amount-column">
            <div class="total-amount">
              â‚¹<%= order.finalAmount.toLocaleString('en-IN') %>
            </div>
          </td>
          <td class="action-column">
            <div class="action-buttons">
              <button class="view-button">
                <a href="/orderdetails?id=<%= order.orderId%>">View</a>
              </button>
            </div>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>

<%- include("../../views/partials/user/footer") %>
